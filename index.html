<!DOCTYPE html>
<html>
<head>
    <title>Simple Chat</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
    <div id="chat-container">
        <div id="chat-messages">
            <!-- Chat messages will appear here -->
        </div>
        <div id="chat-input">
            <input type="text" id="message-input" placeholder="Type your message...">
            <button id="send-button">Send</button>
        </div>
    </div>
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        // Firebase configuration
        // TODO: Replace with your Firebase project's configuration
        const firebaseConfig = {
            apiKey: "YOUR_API_KEY",
            authDomain: "YOUR_AUTH_DOMAIN",
            databaseURL: "YOUR_DATABASE_URL",
            projectId: "YOUR_PROJECT_ID",
            storageBucket: "YOUR_STORAGE_BUCKET",
            messagingSenderId: "YOUR_MESSAGING_SENDER_ID",
            appId: "YOUR_APP_ID"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();

        // Listen for new messages from Firebase
        const messagesRef = database.ref('messages');
        messagesRef.orderByChild('timestamp').on('child_added', (snapshot) => {
            const message = snapshot.val();
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            // TODO: Add different classes for sent vs received messages if user identification is implemented
            // For now, all messages will have the same appearance.
            // If you have a way to identify the sender (e.g., after implementing authentication),
            // you could add 'sent' or 'received' classes like this:
            // if (message.senderId === currentUser.uid) {
            //     messageElement.classList.add('sent');
            // } else {
            //     messageElement.classList.add('received');
            // }
            messageElement.textContent = message.text;
            chatMessages.appendChild(messageElement);
            chatMessages.scrollTop = chatMessages.scrollHeight; // Scroll to the bottom
        });

        // Basic JavaScript for sending messages (optional, can be added later)
        const sendButton = document.getElementById('send-button');
        const messageInput = document.getElementById('message-input');
        const chatMessages = document.getElementById('chat-messages');

        sendButton.addEventListener('click', () => {
            const messageText = messageInput.value;
            if (messageText.trim() !== '') {
                // Send message to Firebase
                database.ref('messages').push({
                    text: messageText,
                    timestamp: firebase.database.ServerValue.TIMESTAMP
                });
                messageInput.value = ''; // Clear input field
            }
        });

        // Optional: Allow sending message by pressing Enter
        messageInput.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                sendButton.click();
            }
        });
    </script>
</body>
</html>
